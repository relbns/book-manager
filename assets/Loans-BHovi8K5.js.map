{"version":3,"file":"Loans-BHovi8K5.js","sources":["../../node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js","../../src/pages/Loans.jsx"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ClockCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/ClockCircleOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nconst ClockCircleOutlined = (props, ref) => /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n  ref: ref,\n  icon: ClockCircleOutlinedSvg\n}));\n\n/**![clock-circle](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUxMiA2NEMyNjQuNiA2NCA2NCAyNjQuNiA2NCA1MTJzMjAwLjYgNDQ4IDQ0OCA0NDggNDQ4LTIwMC42IDQ0OC00NDhTNzU5LjQgNjQgNTEyIDY0em0wIDgyMGMtMjA1LjQgMC0zNzItMTY2LjYtMzcyLTM3MnMxNjYuNi0zNzIgMzcyLTM3MiAzNzIgMTY2LjYgMzcyIDM3Mi0xNjYuNiAzNzItMzcyIDM3MnoiIC8+PHBhdGggZD0iTTY4Ni43IDYzOC42TDU0NC4xIDUzNS41VjI4OGMwLTQuNC0zLjYtOC04LThINDg4Yy00LjQgMC04IDMuNi04IDh2Mjc1LjRjMCAyLjYgMS4yIDUgMy4zIDYuNWwxNjUuNCAxMjAuNmMzLjYgMi42IDguNiAxLjggMTEuMi0xLjdsMjguNi0zOWMyLjYtMy43IDEuOC04LjctMS44LTExLjJ6IiAvPjwvc3ZnPg==) */\nconst RefIcon = /*#__PURE__*/React.forwardRef(ClockCircleOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ClockCircleOutlined';\n}\nexport default RefIcon;","// src/pages/Loans.jsx\nimport React, { useState, useEffect } from 'react';\nimport {\n  Typography,\n  Card,\n  Table,\n  Button,\n  Space,\n  Modal,\n  Form,\n  Input,\n  DatePicker,\n  Select,\n  Tag,\n  Tooltip,\n  Popconfirm,\n  Badge,\n  Alert,\n  Tabs,\n  Statistic,\n  Row,\n  Col,\n  Empty,\n  message,\n} from 'antd';\nimport {\n  SearchOutlined,\n  PlusOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  BookOutlined,\n  UserOutlined,\n  ClockCircleOutlined,\n  CheckCircleOutlined,\n  CalendarOutlined,\n  ImportOutlined,\n  WarningOutlined,\n} from '@ant-design/icons';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useAppContext } from '../context/AppContext';\nimport dayjs from 'dayjs';\nimport ResponsiveFilterContainer from '../components/common/ResponsiveFilterContainer';\n\nconst { Title, Text } = Typography;\nconst { Option } = Select;\nconst { TextArea } = Input;\nconst { TabPane } = Tabs;\n\n// Style for RTL tables\nconst StyledTable = styled(Table)`\n  .ant-table-thead > tr > th {\n    text-align: right;\n  }\n\n  .ant-table-cell {\n    text-align: right;\n  }\n\n  .overdue-row {\n    background-color: #fff1f0;\n  }\n`;\n\nconst StyledCard = styled(Card)`\n  margin-bottom: 24px;\n`;\n\nconst FilterContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16px;\n  margin-bottom: 24px;\n`;\n\nconst ActionsColumn = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n`;\n\nconst Loans = () => {\n  const { loans, books, addLoan, updateLoan, deleteLoan, createLoanModel } =\n    useAppContext();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // State\n  const [form] = Form.useForm();\n  const [searchText, setSearchText] = useState('');\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [editingLoan, setEditingLoan] = useState(null);\n  const [filteredLoans, setFilteredLoans] = useState([]);\n  const [activeTab, setActiveTab] = useState('all');\n  const [statusFilter, setStatusFilter] = useState([]);\n  const [showingOverdue, setShowingOverdue] = useState(false);\n\n  // Parse URL query parameters\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const tab = params.get('tab');\n\n    if (tab) {\n      setActiveTab(tab);\n      handleTabChange(tab);\n    }\n  }, [location]);\n\n  // Apply filtering based on search text and status filter\n  useEffect(() => {\n    let filtered = [...loans];\n\n    // Apply status filter\n    if (statusFilter.length > 0) {\n      filtered = filtered.filter((loan) => statusFilter.includes(loan.status));\n    }\n\n    // Apply search text\n    if (searchText) {\n      const lowerSearchText = searchText.toLowerCase();\n      filtered = filtered.filter((loan) => {\n        const book = books.find((b) => b.id === loan.bookId);\n        const bookTitle = book ? book.title.toLowerCase() : '';\n\n        return (\n          bookTitle.includes(lowerSearchText) ||\n          loan.borrowerName.toLowerCase().includes(lowerSearchText) ||\n          (loan.borrowerContact &&\n            loan.borrowerContact.toLowerCase().includes(lowerSearchText))\n        );\n      });\n    }\n\n    // Sort by loan date (newest first)\n    filtered = filtered.sort(\n      (a, b) => new Date(b.loanDate) - new Date(a.loanDate)\n    );\n\n    // Set filtered and potentially overdue loans\n    setFilteredLoans(filtered);\n\n    // Set showing overdue flag\n    if (activeTab === 'overdue') {\n      setShowingOverdue(true);\n    } else {\n      setShowingOverdue(false);\n    }\n  }, [loans, books, searchText, statusFilter, activeTab]);\n\n  // Change tab\n  const handleTabChange = (key) => {\n    setActiveTab(key);\n\n    // Update the URL to reflect the current tab\n    if (key !== 'all') {\n      navigate(`/loans?tab=${key}`, { replace: true });\n    } else {\n      navigate('/loans', { replace: true });\n    }\n\n    switch (key) {\n      case 'active':\n        setStatusFilter(['active']);\n        break;\n      case 'overdue':\n        setStatusFilter(['active']);\n        // Overdue filtering is handled in the table\n        break;\n      case 'returned':\n        setStatusFilter(['returned']);\n        break;\n      default:\n        setStatusFilter([]);\n    }\n  };\n\n  // Get book title\n  const getBookTitle = (bookId) => {\n    const book = books.find((b) => b.id === bookId);\n    return book ? book.title : 'לא ידוע';\n  };\n\n  // Check if loan is overdue\n  const isLoanOverdue = (loan) => {\n    return loan.status === 'active' && dayjs(loan.dueDate).isBefore(dayjs());\n  };\n\n  // Calculate days until return or days overdue\n  const calculateDaysRemaining = (loan) => {\n    if (loan.status !== 'active') return null;\n\n    const dueDate = dayjs(loan.dueDate);\n    const today = dayjs();\n    return dueDate.diff(today, 'day');\n  };\n\n  // Format date for display\n  const formatDate = (dateString) => {\n    if (!dateString) return '-';\n    return dayjs(dateString).format('DD/MM/YYYY');\n  };\n\n  // Modal handlers\n  const showModal = (loan = null) => {\n    setEditingLoan(loan);\n\n    if (loan) {\n      form.setFieldsValue({\n        ...loan,\n        loanDate: dayjs(loan.loanDate),\n        dueDate: dayjs(loan.dueDate),\n        returnDate: loan.returnDate ? dayjs(loan.returnDate) : null,\n      });\n    } else {\n      form.resetFields();\n      form.setFieldsValue({\n        loanDate: dayjs(),\n        dueDate: dayjs().add(14, 'day'),\n        status: 'active',\n      });\n    }\n\n    setIsModalVisible(true);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n    form.resetFields();\n  };\n\n  const handleSubmit = async (values) => {\n    // Format dates\n    const formattedValues = {\n      ...values,\n      loanDate: values.loanDate.toISOString(),\n      dueDate: values.dueDate.toISOString(),\n      returnDate: values.returnDate ? values.returnDate.toISOString() : null,\n      status: values.returnDate ? 'returned' : 'active',\n    };\n\n    try {\n      if (editingLoan) {\n        await updateLoan(editingLoan.id, formattedValues);\n        message.success('ההשאלה עודכנה בהצלחה');\n      } else {\n        await addLoan(formattedValues);\n        message.success('ההשאלה נוספה בהצלחה');\n      }\n\n      setIsModalVisible(false);\n      form.resetFields();\n    } catch (error) {\n      console.error('Error saving loan:', error);\n      message.error('אירעה שגיאה בשמירת ההשאלה');\n    }\n  };\n\n  const handleDelete = async (loanId) => {\n    try {\n      await deleteLoan(loanId);\n      message.success('ההשאלה נמחקה בהצלחה');\n    } catch (error) {\n      console.error('Error deleting loan:', error);\n      message.error('אירעה שגיאה במחיקת ההשאלה');\n    }\n  };\n\n  const handleReturnBook = async (loan) => {\n    try {\n      await updateLoan(loan.id, {\n        ...loan,\n        returnDate: new Date().toISOString(),\n        status: 'returned',\n      });\n      message.success('הספר סומן כמוחזר בהצלחה');\n    } catch (error) {\n      console.error('Error returning book:', error);\n      message.error('אירעה שגיאה בעת סימון הספר כמוחזר');\n    }\n  };\n\n  // Calculate statistics\n  const totalLoans = loans.length;\n  const activeLoans = loans.filter((loan) => loan.status === 'active').length;\n  const returnedLoans = loans.filter(\n    (loan) => loan.status === 'returned'\n  ).length;\n  const overdueLoans = loans.filter((loan) => isLoanOverdue(loan)).length;\n\n  // Table columns\n  const columns = [\n    {\n      title: 'ספר',\n      dataIndex: 'bookId',\n      key: 'bookId',\n      render: (bookId) => (\n        <Link to={`/books/${bookId}`}>\n          <Space>\n            <BookOutlined />\n            <Text strong>{getBookTitle(bookId)}</Text>\n          </Space>\n        </Link>\n      ),\n    },\n    {\n      title: 'שואל',\n      dataIndex: 'borrowerName',\n      key: 'borrowerName',\n      render: (text, record) => (\n        <Space direction=\"vertical\" size={0}>\n          <Text>{text}</Text>\n          <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n            {record.borrowerContact}\n          </Text>\n        </Space>\n      ),\n    },\n    {\n      title: 'תאריך השאלה',\n      dataIndex: 'loanDate',\n      key: 'loanDate',\n      render: (date) => formatDate(date),\n    },\n    {\n      title: 'תאריך החזרה',\n      dataIndex: 'dueDate',\n      key: 'dueDate',\n      render: (date, record) => (\n        <Space direction=\"vertical\" size={0}>\n          <Text>{formatDate(date)}</Text>\n          {record.status === 'active' && (\n            <Text\n              type={isLoanOverdue(record) ? 'danger' : 'secondary'}\n              style={{ fontSize: '12px' }}\n            >\n              {(() => {\n                const days = calculateDaysRemaining(record);\n                if (days === null) return '';\n                return days < 0\n                  ? `באיחור של ${Math.abs(days)} ימים`\n                  : `נותרו ${days} ימים`;\n              })()}\n            </Text>\n          )}\n        </Space>\n      ),\n    },\n    {\n      title: 'סטטוס',\n      key: 'status',\n      render: (_, record) => {\n        if (record.status === 'returned') {\n          return (\n            <Tag color=\"success\" icon={<CheckCircleOutlined />}>\n              הוחזר{' '}\n              {record.returnDate ? `ב-${formatDate(record.returnDate)}` : ''}\n            </Tag>\n          );\n        }\n\n        if (isLoanOverdue(record)) {\n          return (\n            <Tag color=\"error\" icon={<ClockCircleOutlined />}>\n              באיחור\n            </Tag>\n          );\n        }\n\n        return (\n          <Tag color=\"processing\" icon={<CalendarOutlined />}>\n            פעיל\n          </Tag>\n        );\n      },\n    },\n    {\n      title: 'פעולות',\n      key: 'actions',\n      width: 120,\n      render: (_, record) => (\n        <ActionsColumn>\n          <Tooltip title=\"עריכה\">\n            <Button\n              icon={<EditOutlined />}\n              type=\"text\"\n              onClick={() => showModal(record)}\n            />\n          </Tooltip>\n\n          {record.status === 'active' && (\n            <Tooltip title=\"החזרת ספר\">\n              <Popconfirm\n                title=\"האם להחזיר את הספר?\"\n                onConfirm={() => handleReturnBook(record)}\n                okText=\"כן\"\n                cancelText=\"לא\"\n                placement=\"topRight\"\n              >\n                <Button icon={<ImportOutlined />} type=\"text\" />\n              </Popconfirm>\n            </Tooltip>\n          )}\n\n          <Tooltip title=\"מחיקה\">\n            <Popconfirm\n              title=\"בטוח שאתה רוצה למחוק את ההשאלה?\"\n              onConfirm={() => handleDelete(record.id)}\n              okText=\"כן\"\n              cancelText=\"לא\"\n              placement=\"topRight\"\n            >\n              <Button icon={<DeleteOutlined />} type=\"text\" danger />\n            </Popconfirm>\n          </Tooltip>\n        </ActionsColumn>\n      ),\n    },\n  ];\n\n  // Notification component for overdue books\n  const OverdueNotification = () => {\n    if (overdueLoans === 0) return null;\n\n    return (\n      <Alert\n        message={`יש ${overdueLoans} ספרים באיחור החזרה`}\n        description=\"ספרים שעבר התאריך להחזרתם מודגשים באדום.\"\n        type=\"warning\"\n        showIcon\n        icon={<WarningOutlined />}\n        style={{ marginBottom: 16 }}\n        action={\n          activeTab !== 'overdue' ? (\n            <Button size=\"small\" onClick={() => handleTabChange('overdue')}>\n              הצג רק ספרים באיחור\n            </Button>\n          ) : null\n        }\n      />\n    );\n  };\n\n  return (\n    <div>\n      <StyledCard>\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginBottom: 16,\n          }}\n        >\n          <Title level={2}>השאלות</Title>\n          <Button\n            type=\"primary\"\n            icon={<PlusOutlined />}\n            onClick={() => showModal()}\n          >\n            הוספת השאלה\n          </Button>\n        </div>\n\n        {/* Statistics Cards */}\n        <Row gutter={[16, 16]} style={{ marginBottom: 24 }}>\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"סה״כ השאלות\"\n                value={totalLoans}\n                valueStyle={{ color: '#1890ff' }}\n              />\n            </Card>\n          </Col>\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"השאלות פעילות\"\n                value={activeLoans}\n                valueStyle={{ color: '#52c41a' }}\n              />\n            </Card>\n          </Col>\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"ספרים שהוחזרו\"\n                value={returnedLoans}\n                valueStyle={{ color: '#722ed1' }}\n              />\n            </Card>\n          </Col>\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"באיחור\"\n                value={overdueLoans}\n                valueStyle={{ color: '#f5222d' }}\n              />\n            </Card>\n          </Col>\n        </Row>\n\n        {/* Overdue notification */}\n        <OverdueNotification />\n\n        <Tabs activeKey={activeTab} onChange={handleTabChange}>\n          <TabPane tab=\"כל ההשאלות\" key=\"all\" />\n          <TabPane\n            tab={\n              <Badge count={activeLoans} showZero>\n                <span>השאלות פעילות</span>\n              </Badge>\n            }\n            key=\"active\"\n          />\n          <TabPane\n            tab={\n              <Badge count={overdueLoans} showZero color=\"red\">\n                <span>באיחור</span>\n              </Badge>\n            }\n            key=\"overdue\"\n          />\n          <TabPane tab=\"הוחזרו\" key=\"returned\" />\n        </Tabs>\n\n        <ResponsiveFilterContainer>\n          <Input\n            placeholder=\"חיפוש לפי שם ספר או שם שואל\"\n            prefix={<SearchOutlined />}\n            value={searchText}\n            onChange={(e) => setSearchText(e.target.value)}\n            style={{ width: 300 }}\n          />\n        </ResponsiveFilterContainer>\n\n        {activeTab === 'overdue' && overdueLoans === 0 && (\n          <Empty\n            description=\"אין ספרים באיחור!\"\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n          />\n        )}\n\n        {filteredLoans.length === 0 && activeTab !== 'overdue' && (\n          <Empty description=\"לא נמצאו השאלות\" />\n        )}\n\n        {(filteredLoans.length > 0 ||\n          (activeTab === 'overdue' && overdueLoans > 0)) && (\n          <StyledTable\n            dataSource={\n              activeTab === 'overdue'\n                ? filteredLoans.filter((loan) => isLoanOverdue(loan))\n                : filteredLoans\n            }\n            columns={columns}\n            rowKey=\"id\"\n            rowClassName={(record) =>\n              isLoanOverdue(record) ? 'overdue-row' : ''\n            }\n            pagination={{\n              pageSize: 10,\n              showSizeChanger: true,\n              showTotal: (total) => `סה\"כ ${total} השאלות`,\n            }}\n            locale={{\n              emptyText: 'לא נמצאו השאלות',\n            }}\n          />\n        )}\n      </StyledCard>\n\n      {/* Loan Form Modal */}\n      <Modal\n        title={editingLoan ? 'עריכת השאלה' : 'הוספת השאלה חדשה'}\n        open={isModalVisible}\n        onCancel={handleCancel}\n        footer={null}\n        destroyOnClose\n        width={600}\n      >\n        <Form\n          form={form}\n          layout=\"vertical\"\n          onFinish={handleSubmit}\n          initialValues={createLoanModel()}\n        >\n          <Form.Item\n            name=\"bookId\"\n            label=\"ספר\"\n            rules={[{ required: true, message: 'נא לבחור ספר' }]}\n          >\n            <Select\n              showSearch\n              placeholder=\"בחר ספר\"\n              optionFilterProp=\"children\"\n              filterOption={(input, option) =>\n                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n              }\n            >\n              {books.map((book) => (\n                <Option key={book.id} value={book.id}>\n                  {book.title}\n                </Option>\n              ))}\n            </Select>\n          </Form.Item>\n\n          <Form.Item\n            name=\"borrowerName\"\n            label=\"שם השואל\"\n            rules={[{ required: true, message: 'נא להזין את שם השואל' }]}\n          >\n            <Input placeholder=\"הזן את שם השואל\" />\n          </Form.Item>\n\n          <Form.Item\n            name=\"borrowerContact\"\n            label=\"פרטי קשר\"\n            rules={[{ required: true, message: 'נא להזין פרטי קשר' }]}\n          >\n            <Input placeholder=\"טלפון / אימייל\" />\n          </Form.Item>\n\n          <div style={{ display: 'flex', gap: 16 }}>\n            <Form.Item\n              name=\"loanDate\"\n              label=\"תאריך השאלה\"\n              rules={[{ required: true, message: 'נא לבחור תאריך השאלה' }]}\n              style={{ flex: 1 }}\n            >\n              <DatePicker style={{ width: '100%' }} />\n            </Form.Item>\n\n            <Form.Item\n              name=\"dueDate\"\n              label=\"תאריך החזרה צפוי\"\n              rules={[{ required: true, message: 'נא לבחור תאריך החזרה צפוי' }]}\n              style={{ flex: 1 }}\n            >\n              <DatePicker style={{ width: '100%' }} />\n            </Form.Item>\n          </div>\n\n          <Form.Item name=\"returnDate\" label=\"תאריך החזרה בפועל\">\n            <DatePicker\n              style={{ width: '100%' }}\n              placeholder={\n                editingLoan?.status === 'returned'\n                  ? 'בחר תאריך'\n                  : 'השאר ריק אם לא הוחזר'\n              }\n            />\n          </Form.Item>\n\n          <Form.Item name=\"notes\" label=\"הערות\">\n            <TextArea placeholder=\"הערות נוספות\" rows={3} />\n          </Form.Item>\n\n          {/* Footer */}\n          <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 16 }}>\n            <Button onClick={handleCancel}>ביטול</Button>\n            <Button type=\"primary\" htmlType=\"submit\">\n              {editingLoan ? 'עדכון' : 'הוספה'}\n            </Button>\n          </div>\n        </Form>\n      </Modal>\n    </div>\n  );\n};\n\nexport default Loans;\n"],"names":["_extends","target","i","source","key","ClockCircleOutlined","props","ref","React.createElement","AntdIcon","ClockCircleOutlinedSvg","RefIcon","React.forwardRef","Title","Text","Typography","Option","Select","TextArea","Input","TabPane","Tabs","StyledTable","styled","Table","StyledCard","Card","ActionsColumn","Loans","loans","books","addLoan","updateLoan","deleteLoan","createLoanModel","useAppContext","navigate","useNavigate","location","useLocation","form","Form","searchText","setSearchText","useState","isModalVisible","setIsModalVisible","editingLoan","setEditingLoan","filteredLoans","setFilteredLoans","activeTab","setActiveTab","statusFilter","setStatusFilter","showingOverdue","setShowingOverdue","useEffect","tab","handleTabChange","filtered","loan","lowerSearchText","book","b","a","getBookTitle","bookId","isLoanOverdue","dayjs","calculateDaysRemaining","dueDate","today","formatDate","dateString","showModal","handleCancel","handleSubmit","values","formattedValues","message","error","handleDelete","loanId","handleReturnBook","totalLoans","activeLoans","returnedLoans","overdueLoans","columns","jsx","Link","jsxs","Space","BookOutlined","text","record","date","days","_","Tag","CheckCircleOutlined","CalendarOutlined","Tooltip","Button","EditOutlined","Popconfirm","ImportOutlined","DeleteOutlined","OverdueNotification","Alert","WarningOutlined","PlusOutlined","Row","Col","Statistic","Badge","ResponsiveFilterContainer","SearchOutlined","e","Empty","total","Modal","input","option","DatePicker"],"mappings":"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","x_google_ignoreList":[0]}